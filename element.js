customElements.define("file-size",class extends HTMLElement{gzthermal(){if(!this.img){this.querySelector("i").innerHTML="Loading GZIP Thermal analysis";this.img=this.querySelector("img");this.img.onerror=t=>this.querySelector("i").innerHTML="Too many bytes";this.img.onload=t=>{this.querySelector("i").innerHTML="";this.img.style.width=(this.getAttribute("width")||"700")+"px";this.details.setAttribute("open","open")};this.img.src="https://gzthermal.vercel.app/?url="+this.source}}connectedCallback(){this.source=this.getAttribute("src")||"https://file-size.github.io/element.js";this.file=".../"+this.source.split("/").pop();this.setAttribute("title",this.source);fetch(this.source,{mode:"cors"}).then((t=>{this.length=t.headers.get("content-length")||"no size";this.innerHTML=`<details><summary><b style="display:inline-block;width:4em;text-align:right">${this.length}</b> &nbsp;Bytes ${this.file} <i/></summary><img/></details>`;this.details=this.querySelector("details");this.details.addEventListener("toggle",(t=>{this.details.open&&this.gzthermal()}));this.hasAttribute("gzip")&&this.gzthermal();this.onclick=t=>{t.altKey&&window.open(this.source,"_blank").focus()}})).catch((t=>{window.console.error("file-size",t,this.source)}))}})
